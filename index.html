<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Galaxy Notepad</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.11.0/html2pdf.bundle.min.js"></script>
<style>
    body { margin:0; font-family: 'Inter', sans-serif; background:#0d0d2b; color:#fff; }
    .notepad-container { max-width: 1200px; margin: auto; border:1px solid #444; background:#1a1a3d; display:flex; flex-direction:column; height:90vh; }
    .header { background:#2b2b5a; padding:10px; display:flex; justify-content:space-between; align-items:center; }
    .menu-bar { display:flex; background:#3a3a7a; cursor:pointer; }
    .menu-item { position:relative; padding:10px 15px; user-select:none; }
    .menu-item:hover { background:#5050a0; }
    .dropdown { display:none; position:absolute; top:100%; left:0; background:#3a3a7a; min-width:180px; z-index:10; }
    .dropdown div { padding:8px 12px; cursor:pointer; }
    .dropdown div:hover { background:#5050a0; }
    
    /* Toolbar */
    .toolbar { display:flex; padding:5px; background:#2b2b5a; align-items:center; gap:5px; }
    .toolbar button { background:#3a3a7a; border:none; color:#fff; font-size:18px; padding:5px 10px; cursor:pointer; border-radius:4px; transition:0.2s; }
    .toolbar button:hover { background:#5050a0; box-shadow:0 0 8px #7f7fff; }
    .toolbar select { margin-left:5px; background:#3a3a7a; color:#fff; border:none; padding:5px; border-radius:4px; }
    
    .editor { flex:1; background:#0d0d2b; color:#fff; padding:10px; overflow:auto; white-space:pre-wrap; outline:none; }
    .document-tabs { display:flex; background:#2b2b5a; padding:2px; align-items:center; }
    .tab { padding:5px 10px; border:1px solid #444; margin-right:2px; cursor:pointer; background:#3a3a7a; display:flex; align-items:center; }
    .tab.active { background:#5050a0; }
    .tab-close { margin-left:5px; cursor:pointer; color:#ff8080; }
    .footer { background:#2b2b5a; padding:5px; display:flex; justify-content:space-between; }
    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center; }
    .modal-content { background:#1a1a3d; padding:20px; border:1px solid #444; color:#fff; min-width:300px; }
    .ok-btn, .cancel-btn { margin:5px; padding:5px 10px; cursor:pointer; }
    #findBar { display:none; background:#2b2b5a; padding:5px; align-items:center; gap:5px; }
  /* Add this to your <style> section */
.toolbar-icon {
    margin-left: 8px;
    cursor: pointer;
    background: #3a3a7a;  /* same as your other icons' background */
    border: 1px solid #5050a0;  /* matching border color */
    border-radius: 4px;
    color: #fff;
    font-size: 18px;
    padding: 5px 8px;
    transition: ;background 0.2s;
}

.toolbar-icon:hover {
    background: #5050a0;  /* same hover effect as other icons */
}
/* Dark Theme (default) */
body.dark-theme {
    background: #0d0d2b;
    color: #fff;
}
body.dark-theme .notepad-container { background: #1a1a3d; }
body.dark-theme .header { background: #2b2b5a; }
body.dark-theme .menu-bar { background: #3a3a7a; }
body.dark-theme .toolbar { background: #2b2b5a; }
body.dark-theme .footer { background: #2b2b5a; }
body.dark-theme #editor { background: #0d0d2b; color: #fff; }

/* Light Theme */
body.light-theme {
    background: #f5f5f5;
    color: #000;
}
body.light-theme .notepad-container { background: #e0e0e0; }
body.light-theme .header { background: #dcdcdc; }
body.light-theme .menu-bar { background: #cccccc; }
body.light-theme .toolbar { background: #dcdcdc; }
body.light-theme .footer { background: #dcdcdc; }
body.light-theme #editor { background: #fff; color: #000; }
.highlighted {
    background-color: rgb(0, 0, 0);
}
 #notepad {
    width: 100%;
    height: 400px;
    font-size: 16px;
    padding: 10px;
    box-sizing: border-box;
      #notepad {
      width: 100%;
      height: 200px;
      font-size: 16px;
      padding: 10px;
      box-sizing: border-box;
    }
    button {
      margin: 5px;
      padding: 5px 10px;
    }
    #toolbar {
      margin-bottom: 10px;
    }
    button {
      margin-right: 5px;
      padding: 5px 10px;
    }
    #editor {
      width: 100%;
      height: 300px;
      border: 1px solid #ccc;
      padding: 10px;
      font-size: 16px;
    }
    /* Toolbar */
.toolbar button { 
    background:#3a3a7a; 
    border:none; 
    color:#fff; 
    font-size:14px;   /* ⬅ lowered from 18px */
    padding:5px 8px;  /* ⬅ reduced padding so icons don’t look too big */
    cursor:pointer; 
    border-radius:4px; 
    transition:0.2s; 
}
.toolbar button:hover { 
    background:#5050a0; 
    box-shadow:0 0 8px #7f7fff; 
}

.toolbar-icon {
    margin-left: 6px;
    cursor: pointer;
    background: #3a3a7a;
    border: 1px solid #5050a0;
    border-radius: 4px;
    color: #fff;
    font-size: 14px;   /* ⬅ lowered font size */
    padding: 4px 6px;  /* ⬅ smaller padding for tighter buttons */
    transition: ;background 0.2s;
}
.toolbar-icon:hover {
    background: #5050a0;
}
/* Toolbar adjustments to move font dropdowns to second row */
.toolbar {
    display: flex;
    flex-wrap: wrap; /* allows items to go to next line */
    gap: 5px;
}

#fontFamilySelectToolbar,
#fontSizeSelectToolbar {
    flex-basis: 100%;  /* take full width to move to next row */
    margin-top: 5px;   /* spacing from first row of icons */
}
/* Toolbar: small icons and auto-wrap */
.toolbar {
    display: flex;
    flex-wrap: wrap; /* allows items to move to next line if too many */
    gap: 5px;        /* spacing between icons */
}

/* Make all toolbar buttons/icons smaller */
.toolbar button,
.toolbar .toolbar-icon,
.toolbar select {
    font-size: 14px;     /* smaller font */
    padding: 4px 6px;    /* smaller padding */
    min-width: 30px;     /* prevent them from shrinking too much */
}

/* Force font dropdowns to take full width on new line if needed */
#fontFamilySelectToolbar,
#fontSizeSelectToolbar {
    flex-basis: 100%;  /* full width to move to next row */
    margin-top: 5px;   /* spacing from first row of icons */
}
.toolbar {
  display: flex;
  flex-direction: column; /* stack rows vertically */
  gap: 5px;
}

.toolbar-row {
  display: flex;
  flex-wrap: wrap; /* wrap icons if too many */
  gap: 5px;
}
/* Fix toolbar icon spacing */
.toolbar-row {
    display: flex;
    flex-wrap: wrap; /* allow wrapping if too many icons */
    gap: 6px;        /* space between icons */
}

.toolbar-icon {
    margin: 0 !important;  /* remove all extra margin to prevent icons touching */
}
.toolbar-row button,
.toolbar-row .toolbar-icon {
    margin-right: 6px;   /* horizontal spacing */
    margin-bottom: 5px;  /* vertical spacing if wrapped */
}
body { margin:0; font-family: 'Inter', sans-serif; background:#0d0d2b; color:#fff; }
.notepad-container { max-width: 1200px; margin: auto; border:1px solid #444; background:#1a1a3d; display:flex; flex-direction:column; height:90vh; }
.header { background:#2b2b5a; padding:10px; display:flex; justify-content:space-between; align-items:center; }
.toolbar { display:flex; flex-wrap: wrap; padding:5px; background:#2b2b5a; align-items:center; gap:5px; }
.toolbar button { background:#3a3a7a; border:none; color:#fff; font-size:14px; padding:5px 8px; cursor:pointer; border-radius:4px; transition:0.2s; }
.toolbar button:hover { background:#5050a0; box-shadow:0 0 8px #7f7fff; }
.toolbar select { margin-left:5px; background:#3a3a7a; color:#fff; border:none; padding:5px; border-radius:4px; }
.toolbar-icon { margin-left: 6px; cursor: pointer; background: #3a3a7a; border: 1px solid #5050a0; border-radius: 4px; color: #fff; font-size: 14px; padding: 4px 6px; transition: background 0.2s; }
.toolbar-icon:hover { background: #5050a0; }

.editor { flex:1; padding:10px; overflow:auto; white-space:pre-wrap; outline:none; border:1px solid #444; background:#0d0d2b; color:#fff; transition: all 0.3s ease; }
.editor-container { position: relative; flex:1; }
#drawCanvas { position:absolute; top:0; left:0; border:1px solid #444; display:none; z-index:10; }
.tooltip {
  position: relative;
  display: inline-block;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 160px;
  background-color: #5050a0;
  color: #fff;
  text-align: center;
  padding: 5px;
  border-radius: 4px;
  position: absolute;
  z-index: 20;
  bottom: 125%; /* Show above button */
  left: 50%;
  margin-left: -80px;
  opacity: 0;
  transition: opacity 0.3s;
}

.tooltip.show .tooltiptext {
  visibility: visible;
  opacity: 1;
}

</style>
</head>
<body>
<body class="dark-theme">

<div class="notepad-container">

    <div class="header">
        <span>Galaxy Notepad</span>
        <button id="fullScreenBtn" class="toolbar-icon" title="Full Screen">⛶ Full Screen</button>

    </div>

    <!-- Menu Bar -->
    <div class="menu-bar">
        <div class="menu-item">File
            <div class="dropdown">
                <div id="fileNew">New</div>
                <div id="fileNewTab">New Tab</div>
                <div id="fileOpen">Open...</div>
                <div id="fileSave">Save</div>
                <div id="fileSaveAs">Save As...</div>
                <hr>
                <div id="filePrint">Print...</div>
                <div id="exportTXT">Export TXT</div>
                <div id="exportPDF">Export PDF</div>
                <div id="exportHTML">Export HTML</div>
                <div id="exportMD">Export Markdown</div>
                <div id="exportZIP">Export ZIP</div>
                <div id="exportNT">Export NT</div>
            </div>
        </div>
        <div class="menu-item">Edit
            <div class="dropdown">
                <div id="editUndo">Undo</div>
                <div id="editRedo">Redo</div>
                <div id="editRename">Rename Tab</div>
                <hr>
                <div id="editFind">Find...</div>
                <div id="editReplace">Replace...</div>
                <div id="editGoTo">Go To...</div>
                <hr>
                <div id="editSelectAll">Select All</div>
                <div id="editTimeDate">Time/Date</div>
            </div>
        </div>
        <div class="menu-item">Format
            <div class="dropdown">
                <div id="formatFont">Font...</div>
            </div>
        </div>
        <div class="menu-item">View
            <div class="dropdown">
                <div id="zoomIn">Zoom In</div>
                <div id="zoomOut">Zoom Out</div>
                <div id="zoomReset">Restore Default Zoom</div>
                <div id="viewStatusBar">Status Bar ✓</div>
            </div>
        </div>
        <div class="menu-item">Help
            <div class="dropdown">
                <div id="helpAbout">About Notepad</div>
            </div>
        </div>
    </div>

<!-- Toolbar -->
<div class="toolbar">
  <!-- First Row -->
  <div class="toolbar-row" id="toolbarRow1">
    <button id="newFileBtn" class="toolbar-icon" title="New File">🗎</button>
    <button id="openFileBtn" class="toolbar-icon" title="Open File">📂</button>
    <button id="saveFileBtn" class="toolbar-icon" title="Save File">💾</button>
    <button id="printBtn" class="toolbar-icon" title="Print">🖨️</button>
    <button id="undoBtn" class="toolbar-icon" title="Undo">↩️</button>
    <button id="redoBtn" class="toolbar-icon" title="Redo">↪️</button>
    <button onclick="format('subscript')" class="toolbar-icon">Subscript</button>
    <button onclick="format('superscript')" class="toolbar-icon">Superscript</button>
    <button onclick="format('insertHorizontalRule')" class="toolbar-icon">Line</button>
  </div>

  <!-- Second Row -->
  <div class="toolbar-row" id="toolbarRow2">
    <button id="boldBtn" class="toolbar-icon" title="Bold"><b>B</b></button>
    <button id="italicBtn" class="toolbar-icon" title="Italic"><i>I</i></button>
    <button id="underlineBtn" class="toolbar-icon" title="Underline"><u>U</u></button>
    <button id="align-left" class="toolbar-icon">Left</button>
    <button id="align-center" class="toolbar-icon">Center</button>
    <button id="align-right" class="toolbar-icon">Right</button>
    <button id="align-justify" class="toolbar-icon">Justify</button>
    <button onclick="format('insertOrderedList')" title="Numbering: Adds numbered list.">1. List</button>
<button id="bulletListBtn" class="toolbar-icon" title="Bulleted List">• List</button>
<input type="color" id="fontColorPicker" class="toolbar-icon" title="Font Color">
<button id="insertTableBtn" class="toolbar-icon" title="Insert Table">📋 Table</button>
  <button id="insertPictureBtn" class="toolbar-icon" title="Insert Picture">🖼️ Picture</button>
      <button id="insertTextBoxBtn" class="toolbar-icon" title="Insert Text Box" onclick="insertTextBox()">📝 Text Box</button>
    <button id="insertPageNumberBtn" class="toolbar-icon" title="Insert Page Number"> Page</button>
<button id="insertLinkBtn" class="toolbar-icon" title="Insert Link">🔗 Link</button>
<button id="insertSymbolBtn" class="toolbar-icon" title="Insert Symbol">🔣</button>
  <button id="shareBtn" class="toolbar-icon" title="Share Notepad">🔗 Share</button>
  <!-- Social Share Icons -->
<button onclick="shareURL('twitter')" class="toolbar-icon" title="Share on Twitter">🐦</button>
<button onclick="shareURL('facebook')" class="toolbar-icon" title="Share on Facebook">📘</button>
<button onclick="shareURL('linkedin')" class="toolbar-icon" title="Share on LinkedIn">💼</button>
<button onclick="copyShareURL()" class="toolbar-icon" title="Copy Link">🔗</button>
<button id="copyLinkBtn" class="toolbar-icon" title="Copy Link">🔗 Copy Link</button>





<!-- Symbol Picker (hidden until button clicked) -->
<select id="symbolPicker" style="display:none;">
  <option value="">Select Symbol</option>
  <option value="✓">✓ Checkmark</option>
  <option value="★">★ Star</option>
  <option value="♥">♥ Heart</option>
  <option value="♦">♦ Diamond</option>
  <option value="♪">♪ Music Note</option>
</select>
<!-- Add this button to your toolbar -->
<button id="spellCheckBtn" class="toolbar-icon" title="Spelling & Grammar">🔤</button>

   



    <select id="fontFamilySelectToolbar">
      <option value="Inter, sans-serif">Inter</option>
      <option value="Arial, sans-serif">Arial</option>
      <option value="Courier New, monospace">Courier New</option>
    </select>
    <select id="fontSizeSelectToolbar">
      <option value="12px">12</option>
      <option value="14px">14</option>
      <option value="16px" selected>16</option>
      <option value="18px">18</option>
    </select>
  </div>
</div>


    <!-- Find/Replace -->
    <div id="findBar">
        <label>Find:</label><input type="text" id="findInput">
        <label>Replace:</label><input type="text" id="replaceInput">
        <button id="findNextBtn">Find Next</button>
        <button id="replaceBtn">Replace</button>
        <button id="replaceAllBtn">Replace All</button>
        <button id="findCloseBtn">Close</button>
    </div>

    <!-- Tabs -->
    <div class="document-tabs" id="documentTabs">
        <div class="tab active" data-id="tab-0"><span class="tab-name">Untitled</span><span class="tab-close">x</span></div>
        <span class="new-tab-btn" id="newTabBtn">+</span>
    </div>

    <!-- Editor -->
    <div id="editor" class="editor" contenteditable="true" spellcheck="false">Start typing...</div>

    <!-- Footer -->
    <div class="footer" id="footer">
        <span id="lineCol">Ln 1, Col 1</span>
        <span id="wordCount">Words: 0</span>
        <span id="charCount">Chars: 0</span>
    </div>
</div>

<input type="file" id="hiddenFileInput" style="display:none">

<!-- Modals -->
<div id="renameTabModal" class="modal">
  <div class="modal-content">
    <h3>Rename Tab</h3>
    <input type="text" id="renameTabInput">
    <button class="ok-btn" id="renameTabOkBtn">Rename</button>
    <button class="cancel-btn" id="renameTabCancelBtn">Cancel</button>
  </div>
</div>

<div id="goToModal" class="modal">
  <div class="modal-content">
    <h3>Go To Line</h3>
    <input type="number" id="goToInput">
    <button class="ok-btn" id="goToOkBtn">Go To</button>
    <button class="cancel-btn" id="goToCancelBtn">Cancel</button>
  </div>
</div>

<div id="fontModal" class="modal">
  <div class="modal-content">
    <h3>Font</h3>
    <select id="fontFamilySelect">
      <option value="Inter, sans-serif">Inter</option>
      <option value="Arial, sans-serif">Arial</option>
      <option value="Courier New, monospace">Courier New</option>
    </select>
    <select id="fontSizeSelect">
      <option value="12px">12</option>
      <option value="16px" selected>16</option>
      <option value="20px">20</option>
      <option value="24px">24</option>
    </select>
    <button class="ok-btn" id="fontOkBtn">OK</button>
    <button class="cancel-btn" id="fontCancelBtn">Cancel</button>
  </div>
</div>

<script>
/* ---- Tabs ---- */
let tabIdCounter=0;
const tabsData={'tab-0':{name:'Untitled', content:'Start typing...', fontFamily:'Inter, sans-serif', fontSize:'16px'}};
const editor=document.getElementById('editor');
function syncCurrentTab(){ const activeTab=document.querySelector('.tab.active'); if(activeTab) tabsData[activeTab.dataset.id].content=editor.innerText; }
function switchTab(tab){ document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active')); tab.classList.add('active'); const data=tabsData[tab.dataset.id]; editor.innerText=data.content; editor.style.fontFamily=data.fontFamily; editor.style.fontSize=data.fontSize; }
function addNewTab(name='Untitled', content=''){ tabIdCounter++; const newId='tab-'+tabIdCounter; tabsData[newId]={name,content,fontFamily:'Inter, sans-serif', fontSize:'16px'}; const tab=document.createElement('div'); tab.className='tab'; tab.dataset.id=newId; tab.innerHTML=`<span class="tab-name">${name}</span><span class="tab-close">x</span>`; document.getElementById('documentTabs').insertBefore(tab,document.getElementById('newTabBtn')); tab.querySelector('.tab-name').onclick=()=>{ syncCurrentTab(); switchTab(tab); }; tab.querySelector('.tab-close').onclick=e=>{ e.stopPropagation(); tab.remove(); delete tabsData[newId]; }; switchTab(tab); }
document.getElementById('newTabBtn').onclick=()=>{ syncCurrentTab(); addNewTab(); };
document.querySelector('.tab-name').onclick=()=>switchTab(document.querySelector('.tab'));

/* ---- Menu ---- */
document.querySelectorAll('.menu-item').forEach(item=>{ item.onclick=e=>{ e.stopPropagation(); const dropdown=item.querySelector('.dropdown'); document.querySelectorAll('.dropdown').forEach(d=>{ if(d!==dropdown) d.style.display='none'; }); if(dropdown) dropdown.style.display= dropdown.style.display==='block'?'none':'block'; }; });
document.addEventListener('click',()=>document.querySelectorAll('.dropdown').forEach(d=>d.style.display='none'));

/* ---- Toolbar ---- */
document.getElementById('newFileBtn').onclick=()=>{ editor.innerText=''; };
document.getElementById('openFileBtn').onclick=()=>document.getElementById('hiddenFileInput').click();
document.getElementById('saveFileBtn').onclick=()=>{ const blob=new Blob([editor.innerText],{type:"text/plain"}); saveAs(blob,"document.txt"); };
document.getElementById('fontFamilySelectToolbar').onchange=e=>editor.style.fontFamily=e.target.value;
document.getElementById('fontSizeSelectToolbar').onchange=e=>editor.style.fontSize=e.target.value;

/* ---- File ---- */
document.getElementById('fileNew').onclick=()=>{ editor.innerText=''; };
document.getElementById('fileNewTab').onclick=()=>addNewTab();
document.getElementById('fileOpen').onclick=()=>document.getElementById('hiddenFileInput').click();
document.getElementById('hiddenFileInput').onchange=function(){ const file=this.files[0]; if(file){ const r=new FileReader(); r.onload=e=>editor.innerText=e.target.result; r.readAsText(file); } };
function saveFile(name){ const blob=new Blob([editor.innerText],{type:"text/plain"}); saveAs(blob,name); }
document.getElementById('fileSave').onclick=()=>saveFile("document.txt");
document.getElementById('fileSaveAs').onclick=()=>saveFile(prompt("Save As:","document.txt"));
document.getElementById('filePrint').onclick=()=>window.print();
document.getElementById('exportTXT').onclick=()=>saveFile("export.txt");
document.getElementById('exportPDF').onclick=()=>html2pdf().from(editor).save("export.pdf");
document.getElementById('exportHTML').onclick=()=>saveAs(new Blob([editor.innerHTML],{type:"text/html"}),"export.html");
document.getElementById('exportMD').onclick=()=>saveAs(new Blob([editor.innerText],{type:"text/markdown"}),"export.md");
document.getElementById('exportZIP').onclick=()=>{ const zip=new JSZip(); zip.file("export.txt",editor.innerText); zip.generateAsync({type:"blob"}).then(c=>saveAs(c,"export.zip")); };
document.getElementById('exportNT').onclick=()=>saveFile("export.nt");

/* ---- Edit ---- */
document.getElementById('editUndo').onclick=()=>document.execCommand('undo');
document.getElementById('editRedo').onclick=()=>document.execCommand('redo');
document.getElementById('editSelectAll').onclick=()=>document.execCommand('selectAll');
document.getElementById('editTimeDate').onclick=()=>editor.innerText+="\n"+new Date().toLocaleString();
document.getElementById('editFind').onclick=()=>document.getElementById('findBar').style.display='flex';
document.getElementById('findCloseBtn').onclick=()=>document.getElementById('findBar').style.display='none';
document.getElementById('findNextBtn').onclick=()=>{ const text=editor.innerText; const term=document.getElementById('findInput').value; const idx=text.indexOf(term,editor.selectionEnd||0); if(idx!==-1){ const range=document.createRange(); const sel=window.getSelection(); range.setStart(editor.firstChild,idx); range.setEnd(editor.firstChild,idx+term.length); sel.removeAllRanges(); sel.addRange(range); } };
document.getElementById('replaceBtn').onclick=()=>{ const term=document.getElementById('findInput').value; const repl=document.getElementById('replaceInput').value; editor.innerText=editor.innerText.replace(term,repl); };
document.getElementById('replaceAllBtn').onclick=()=>{ const term=document.getElementById('findInput').value; const repl=document.getElementById('replaceInput').value; editor.innerText=editor.innerText.split(term).join(repl); };
document.getElementById('editGoTo').onclick=()=>document.getElementById('goToModal').style.display='flex';
document.getElementById('goToOkBtn').onclick=()=>{ const line=+document.getElementById('goToInput').value; const lines=editor.innerText.split("\n"); let pos=0; for(let i=0;i<line-1;i++) pos+=lines[i].length+1; const range=document.createRange(); const sel=window.getSelection(); range.setStart(editor.firstChild,pos); range.collapse(true); sel.removeAllRanges(); sel.addRange(range); document.getElementById('goToModal').style.display='none'; };
document.getElementById('goToCancelBtn').onclick=()=>document.getElementById('goToModal').style.display='none';
document.getElementById('editRename').onclick=()=>document.getElementById('renameTabModal').style.display='flex';
document.getElementById('renameTabOkBtn').onclick=()=>{ const newName=document.getElementById('renameTabInput').value; const active=document.querySelector('.tab.active'); if(active){ active.querySelector('.tab-name').innerText=newName; tabsData[active.dataset.id].name=newName; } document.getElementById('renameTabModal').style.display='none'; };
document.getElementById('renameTabCancelBtn').onclick=()=>document.getElementById('renameTabModal').style.display='none';

/* ---- Format ---- */
document.getElementById('formatFont').onclick=()=>document.getElementById('fontModal').style.display='flex';
document.getElementById('fontOkBtn').onclick=()=>{ editor.style.fontFamily=document.getElementById('fontFamilySelect').value; editor.style.fontSize=document.getElementById('fontSizeSelect').value; document.getElementById('fontModal').style.display='none'; };
document.getElementById('fontCancelBtn').onclick=()=>document.getElementById('fontModal').style.display='none';

/* ---- View ---- */
document.getElementById('zoomIn').onclick=()=>editor.style.fontSize=(parseInt(getComputedStyle(editor).fontSize)+2)+"px";
document.getElementById('zoomOut').onclick=()=>editor.style.fontSize=(parseInt(getComputedStyle(editor).fontSize)-2)+"px";
document.getElementById('zoomReset').onclick=()=>editor.style.fontSize="16px";
document.getElementById('viewStatusBar').onclick=()=>{ const footer=document.getElementById('footer'); footer.style.display=footer.style.display==='none'?'flex':'flex'; };

/* ---- Help ---- */
document.getElementById('helpAbout').onclick=()=>alert("Galaxy Notepad v1.0\nBuilt with ❤️");
</script>
  <script>
    document.getElementById('toolbarPrintBtn').onclick = () => {
    window.print();
};
  </script>
  <script>
    /* ---- Word & Character Count ---- */
function updateCounts() {
    const text = editor.innerText;
    const words = text.trim() === "" ? 0 : text.trim().split(/\s+/).length;
    const chars = text.length;
    document.getElementById('wordCount').innerText = `Words: ${words}`;
    document.getElementById('charCount').innerText = `Chars: ${chars}`;
}

/* ---- Line & Column Count ---- */
function updateLineCol() {
    const selection = window.getSelection();
    const text = editor.innerText;
    let caretPos = 0;
    if (selection.rangeCount > 0) {
        const range = selection.getRangeAt(0);
        const preCaretRange = range.cloneRange();
        preCaretRange.selectNodeContents(editor);
        preCaretRange.setEnd(range.endContainer, range.endOffset);
        caretPos = preCaretRange.toString().length;
    }
    const lines = text.substr(0, caretPos).split("\n");
    const line = lines.length;
    const col = lines[lines.length - 1].length + 1;
    document.getElementById('lineCol').innerText = `Ln ${line}, Col ${col}`;
}

/* ---- Update on input & selection change ---- */
editor.addEventListener('input', () => {
    updateCounts();
    updateLineCol();
});

editor.addEventListener('keyup', updateLineCol);
editor.addEventListener('click', updateLineCol);

/* ---- Initialize counts ---- */
updateCounts();
updateLineCol();
  </script>
  <script>
document.getElementById('newFileBtn').onclick = () => editor.innerText = '';
document.getElementById('openFileBtn').onclick = () => document.getElementById('hiddenFileInput').click();
document.getElementById('saveFileBtn').onclick = () => saveFile("document.txt");
document.getElementById('printBtn').onclick = () => window.print();
document.getElementById('undoBtn').onclick = () => document.execCommand('undo');
document.getElementById('redoBtn').onclick = () => document.execCommand('redo');
</script>
  <script>
document.getElementById('boldBtn').onclick = () => document.execCommand('bold');
document.getElementById('italicBtn').onclick = () => document.execCommand('italic');
document.getElementById('underlineBtn').onclick = () => document.execCommand('underline');
</script>
<script>
let bitState = 0; // 0 or 1

document.getElementById('bitToggleBtn').onclick = () => {
    bitState = bitState === 0 ? 1 : 0; // toggle
    console.log("Bit state:", bitState);

    // Optional: change button color to show state
    if(bitState === 1){
        document.getElementById('bitToggleBtn').style.background = "#4caf50"; // green
    } else {
        document.getElementById('bitToggleBtn').style.background = "#3a3a7a"; // original blue
    }

    // Add any feature you want to trigger by bit toggle
    // Example: toggle editor text color
    // editor.style.color = bitState ? "#f00" : "#fff";
};
</script>
<script>
const editorDiv = document.getElementById('editor');

document.getElementById('align-left').addEventListener('click', () => {
    editorDiv.style.textAlign = 'left';
});

document.getElementById('align-center').addEventListener('click', () => {
    editorDiv.style.textAlign = 'center';
});

document.getElementById('align-right').addEventListener('click', () => {
    editorDiv.style.textAlign = 'right';
});
</script>
<script>
// Extend tabsData to store alignment
// Example: tabsData['tab-0'] = {name:'Untitled', content:'...', fontFamily:'Inter', fontSize:'16px', textAlign:'left'}

function switchTab(tab) {
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    tab.classList.add('active');
    const data = tabsData[tab.dataset.id];
    editor.innerText = data.content;
    editor.style.fontFamily = data.fontFamily;
    editor.style.fontSize = data.fontSize;
    editor.style.textAlign = data.textAlign || 'left'; // default left
}

function syncCurrentTab() {
    const activeTab = document.querySelector('.tab.active');
    if(activeTab) {
        tabsData[activeTab.dataset.id].content = editor.innerText;
        tabsData[activeTab.dataset.id].textAlign = editor.style.textAlign || 'left';
    }
}

// Alignment buttons
document.getElementById('align-left').onclick = () => {
    editor.style.textAlign = 'left';
    syncCurrentTab();
};
document.getElementById('align-center').onclick = () => {
    editor.style.textAlign = 'center';
    syncCurrentTab();
};
document.getElementById('align-right').onclick = () => {
    editor.style.textAlign = 'right';
    syncCurrentTab();
};

// Make sure when switching tabs, the alignment is restored
document.querySelectorAll('.tab').forEach(tab => {
    tab.querySelector('.tab-name').onclick = () => {
        syncCurrentTab();
        switchTab(tab);
    };
});
</script>
<script>
// Reference editor
const editorDiv = document.getElementById('editor');

// Function to save current tab content and alignment
function syncCurrentTab() {
    const activeTab = document.querySelector('.tab.active');
    if (activeTab) {
        tabsData[activeTab.dataset.id].content = editorDiv.innerText;
        tabsData[activeTab.dataset.id].textAlign = editorDiv.style.textAlign || 'left';
    }
}

// Function to switch tabs and restore alignment
function switchTab(tab) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    const data = tabsData[tab.dataset.id];
    editorDiv.innerText = data.content;
    editorDiv.style.fontFamily = data.fontFamily;
    editorDiv.style.fontSize = data.fontSize;
    editorDiv.style.textAlign = data.textAlign || 'left';
}

// Alignment buttons
document.getElementById('align-left').onclick = () => { editorDiv.style.textAlign = 'left'; syncCurrentTab(); };
document.getElementById('align-center').onclick = () => { editorDiv.style.textAlign = 'center'; syncCurrentTab(); };
document.getElementById('align-right').onclick = () => { editorDiv.style.textAlign = 'right'; syncCurrentTab(); };
document.getElementById('align-justify').onclick = () => { editorDiv.style.textAlign = 'justify'; syncCurrentTab(); };

// Ensure tab clicks restore alignment
document.querySelectorAll('.tab').forEach(tab => {
    tab.querySelector('.tab-name').onclick = () => {
        syncCurrentTab();
        switchTab(tab);
    };
});
</script>
<script
document.getElementById('align-left').onclick = () => document.execCommand('justifyLeft');
document.getElementById('align-center').onclick = () => document.execCommand('justifyCenter');
document.getElementById('align-right').onclick = () => document.execCommand('justifyRight');
document.getElementById('align-justify').onclick = () => document.execCommand('justifyFull');
</script>
  <script>
    function format(command) {
      document.execCommand(command, false, null);
    }
  </script>
  <script>
  document.getElementById('bulletListBtn').onclick = () => {
    document.execCommand('insertUnorderedList');
    syncCurrentTab(); // Make sure it updates the current tab's content
};
</script>

    <script>
    document.getElementById("fontColorPicker").addEventListener("input", function() {
  document.execCommand("foreColor", false, this.value);
});
</script>
<script>
document.getElementById('insertTableBtn').addEventListener('click', () => {
    const rows = prompt("Enter number of rows:", "2");
    const cols = prompt("Enter number of columns:", "2");
    if (!rows || !cols) return;

    let tableHTML = '<table border="1" style="border-collapse:collapse;">';
    for (let r = 0; r < parseInt(rows); r++) {
        tableHTML += '<tr>';
        for (let c = 0; c < parseInt(cols); c++) {
            tableHTML += '<td>&nbsp;</td>';
        }
        tableHTML += '</tr>';
    }
    tableHTML += '</table><br>';

    const editor = document.getElementById('editor');
    editor.focus();

    // Insert table at cursor position
    document.execCommand('insertHTML', false, tableHTML);
});
</script>
<!-- Example JS function for Insert Table -->
<script>
function insertTable() {
  const rows = prompt("Number of rows:", 2);
  const cols = prompt("Number of columns:", 2);
  if (rows > 0 && cols > 0) {
    let tableHTML = "<table border='1' style='border-collapse:collapse'>";
    for (let r = 0; r < rows; r++) {
      tableHTML += "<tr>";
      for (let c = 0; c < cols; c++) {
        tableHTML += "<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>";
      }
      tableHTML += "</tr>";
    }
    tableHTML += "</table><br/>";
    document.execCommand('insertHTML', false, tableHTML);
  }
}
</script>
<script>
// Insert Picture functionality
const insertPictureBtn = document.getElementById('insertPictureBtn');

insertPictureBtn.addEventListener('click', () => {
  const input = document.createElement('input');
  input.type = 'file';
  input.accept = 'image/*';
  input.onchange = e => {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = event => {
      // Insert image as <img> tag in editor
      const imgHTML = `<img src="${event.target.result}" alt="Inserted Image" style="max-width:100%; height:auto;">`;
      
      // Insert at current cursor position
      insertHTMLAtCursor(imgHTML);
    };
    reader.readAsDataURL(file);
  };
  input.click();
});

// Function to insert HTML at current cursor position
function insertHTMLAtCursor(html) {
  const sel = window.getSelection();
  if (!sel.rangeCount) return;

  const range = sel.getRangeAt(0);
  range.deleteContents();

  const el = document.createElement('div');
  el.innerHTML = html;
  const frag = document.createDocumentFragment();
  let node, lastNode;
  while ((node = el.firstChild)) {
    lastNode = frag.appendChild(node);
  }
  range.insertNode(frag);

  // Move cursor after inserted content
  if (lastNode) {
    range.setStartAfter(lastNode);
    range.setEndAfter(lastNode);
    sel.removeAllRanges();
    sel.addRange(range);
  }
}
</script>

<script> 
      // Basic formatting
  function format(command) {
    document.execCommand(command, false, null);
  }

  // Insert Text Box
  function insertTextBox() {
    const editor = document.getElementById('editor');
    const textBox = document.createElement('div');
    textBox.contentEditable = true;
    textBox.style.border = '1px solid #fff';
    textBox.style.padding = '5px';
    textBox.style.margin = '5px 0';
    textBox.style.minWidth = '50px';
    textBox.style.display = 'inline-block';
    textBox.innerText = 'Type here...';
    editor.appendChild(textBox);
    textBox.focus();
  }
  </script>


  <script>
// Insert Page Number
document.getElementById('insertPageNumberBtn').addEventListener('click', function() {
    const editor = document.getElementById('editor');
    const pageNumberDiv = document.createElement('div');
    pageNumberDiv.className = 'page-number';
    pageNumberDiv.innerHTML = "Page 1"; // initial page
    pageNumberDiv.style.fontStyle = "italic";
    pageNumberDiv.style.textAlign = "right"; // default
    editor.appendChild(pageNumberDiv);
});

// Alignment buttons
document.getElementById('align-left').addEventListener('click', () => {
    const lastPage = document.querySelector('.page-number:last-of-type');
    if(lastPage) lastPage.style.textAlign = 'left';
});
document.getElementById('align-center').addEventListener('click', () => {
    const lastPage = document.querySelector('.page-number:last-of-type');
    if(lastPage) lastPage.style.textAlign = 'center';
});
document.getElementById('align-right').addEventListener('click', () => {
    const lastPage = document.querySelector('.page-number:last-of-type');
    if(lastPage) lastPage.style.textAlign = 'right';
});
</script>
<script>
    document.getElementById('insertLinkBtn').addEventListener('click', function() {
    var url = prompt("Enter the URL for the link:", "https://");
    if (url) {
        var selection = window.getSelection();
        if (!selection.isCollapsed) {
            var link = document.createElement("a");
            link.href = url;
            link.target = "_blank";
            link.textContent = selection.toString();
            var range = selection.getRangeAt(0);
            range.deleteContents();
            range.insertNode(link);
        } else {
            alert("Please highlight the text you want to turn into a link.");
        }
    }
});
</script>
 <script>
  // Show/hide symbol picker when button clicked
  document.getElementById('insertSymbolBtn').addEventListener('click', function() {
    const picker = document.getElementById('symbolPicker');
    picker.style.display = picker.style.display === 'none' ? 'inline-block' : 'none';
  });

  // Insert selected symbol
  document.getElementById('symbolPicker').addEventListener('change', function() {
    const symbol = this.value;
    if (symbol) {
      document.execCommand("insertText", false, symbol);
      this.value = ""; // reset
      this.style.display = 'none'; // hide after choosing
    }
  });
</script>
<script>
const fullScreenBtn = document.getElementById('fullScreenBtn');
const notepadContainer = document.querySelector('.notepad-container');

fullScreenBtn.addEventListener('click', () => {
    if (!document.fullscreenElement) {
        notepadContainer.requestFullscreen().catch(err => {
            alert(`Error attempting to enable full-screen mode: ${err.message}`);
        });
    } else {
        document.exitFullscreen();
    }
});
</script>

<script>
// Share URL button with tooltip
const shareBtn = document.getElementById('shareBtn');
const tooltip = document.getElementById('shareTooltip');

shareBtn.addEventListener('click', () => {
    const notepadURL = window.location.href;

    // Copy URL to clipboard
    navigator.clipboard.writeText(notepadURL)
        .then(() => {
            // Show tooltip
            tooltip.parentElement.classList.add('show');
            setTimeout(() => {
                tooltip.parentElement.classList.remove('show');
            }, 2000); // Hide after 2 seconds
        })
        .catch(() => {
            alert('Failed to copy URL.');
        });

    // Optional: also use native share on mobile if supported
    if (navigator.share) {
        navigator.share({
            title: 'Check out this Notepad!',
            url: notepadURL
        }).catch(err => console.error('Share failed:', err));
    }
});
</script>
<script>
const notepadURL = window.location.href;

function shareURL(platform) {
  let shareLink = '';
  const text = encodeURIComponent("Check out this awesome Notepad!");
  const url = encodeURIComponent(notepadURL);

  if(platform === 'twitter') shareLink = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
  if(platform === 'facebook') shareLink = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
  if(platform === 'linkedin') shareLink = `https://www.linkedin.com/shareArticle?mini=true&url=${url}&title=${text}`;

  window.open(shareLink, '_blank');
}

function copyShareURL() {
  navigator.clipboard.writeText(notepadURL).then(() => {
    alert('Link copied to clipboard!');
  });
}
</script>
<script>
  document.getElementById("copyLinkBtn").addEventListener("click", function () {
    navigator.clipboard.writeText(window.location.href).then(() => {
      let toast = document.getElementById("toast");
      toast.style.visibility = "visible";
      toast.style.opacity = "1";
      toast.style.bottom = "50px";

      setTimeout(() => {
        toast.style.opacity = "0";
        toast.style.bottom = "30px";
        setTimeout(() => {
          toast.style.visibility = "hidden";
        }, 500);
      }, 2000);
    });
  });
</script>

</body>
</html>
